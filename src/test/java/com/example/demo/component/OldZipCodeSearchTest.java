package com.example.demo.component;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.google.common.collect.Maps;
import lombok.extern.slf4j.Slf4j;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.test.context.ActiveProfiles;
import org.springframework.test.context.junit4.SpringRunner;
import org.springframework.util.LinkedMultiValueMap;
import org.springframework.util.MultiValueMap;
import org.springframework.web.client.RestTemplate;

import java.util.*;

@Slf4j
@RunWith(SpringRunner.class)
@SpringBootTest
@ActiveProfiles("local")
public class OldZipCodeSearchTest {

	@Test
	public void search() {
		RestTemplate restTemplate = new RestTemplate();

		String url = "http://chemionshop.com/exec/common/zipcoden/find";
		String keyword = "138112";
		String keywordType = "null";
		String selectPost = "6";

		MultiValueMap<String, String> parameters = new LinkedMultiValueMap<>();
		parameters.add("keyword", keyword);
		parameters.add("keyword_type", keywordType);
		parameters.add("selectpost", selectPost);

		HttpHeaders headers = new HttpHeaders();
		HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<>(parameters, headers);

		String response = restTemplate.postForObject(url, request, String.class);
		log.debug("result : {}", response);

		response = response.replace("\\r\\n", "");

		Map<Object,Object> map = new HashMap();
		ObjectMapper mapper = new ObjectMapper();

		try {
			//convert JSON string to Map
			map = mapper.readValue(response, new TypeReference<HashMap<Object,Object>>(){});
		} catch (Exception e) {
			log.info("Exception converting {} to map", response, e);
		}

		LinkedHashMap resultData = (LinkedHashMap)map.get("resultData");
		ArrayList listData = (ArrayList) resultData.get("listData");
		LinkedHashMap listDataGet0 = (LinkedHashMap) listData.get(0);

		listDataGet0.get("zipcode_address");
		listDataGet0.get("jibunAddress");
		listDataGet0.get("inputjibunAddress");

		log.debug("result : {}", listDataGet0);

//        http://chemionshop.com/exec/common/zipcoden/find
//        Method:POST
//        keyword:138918
//        keyword_type:null
//        selectpost:6
//        {"resultCode":"SUCC","resultMsg":"\uc131\uacf5","resultData":{"keyword":"138918","returnRequestType":"1","jibunTotalCnt":"1","streetTotalCnt":"0","sidoCntInfoData":{"1":{"sidoName":"\uc11c\uc6b8","sidoCode":1,"sidoCnt":"1"}},"sidoTotalCnt":1,"searchTotalCnt":"1","listData":[{"zipcode":"138918","zipcode_address":"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc \uc1a1\ud30c\uad6c \uc7a0\uc2e46\ub3d9 \uc7a5\ubbf8\uc544\ud30c\ud2b8 (16~31\ub3d9)","jibunAddress":"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc \uc1a1\ud30c\uad6c \uc7a0\uc2e46\ub3d9 \uc7a5\ubbf8\uc544\ud30c\ud2b8 (16~31\ub3d9)","inputJibunAddress":"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc \uc1a1\ud30c\uad6c \uc7a0\uc2e46\ub3d9 \uc7a5\ubbf8\uc544\ud30c\ud2b8","streetBuildingName":"","jibunAddressEng":null,"inputJibunAddressEng":null,"streetAddress":"","streetAddressEng":""}]}}

	}

	@Test
	public void search2() {
		String[] oldZipCodeArray = "138112,138111,440202,440201,442869,138041,138042,417880,430844,138051,138052,138050,151019,151018,151017,151016,151014,151013,151012,151011,429889,151029,151022,417850,429829,513820,417860,513810,405808,417810,417820,429813,417830,151051,151061,151060,151058,151057,151056,151055,151053,210090,151069,440303,440302,440301,429939,210102,210101,560090,210112,210111,501716,702040,417920,702052,702053,702051,417930,405911,560060,405907,429930,429929,702011,702014,702012,702013,702021,702022,417910,702083,702082,427050,395810,395840,395850,395820,403091,403092,395830,403080,403081,403082,660950,660940,660970,660960,403032,403031,403021,403022,403023,403024,153865,403012,403013,403014,403015,403016,635910,635920,635930,635940,635950,660910,660900,660901,660930,660920,635900,138202,138201,645290,153852,395900,138224,138222,138223,138229,138226,138227,153845,153848,153849,704804,405770,660830,138161,716850,138162,635880,138169,403101,403102,403103,138172,660820,138171,635890,716840,395860,405754,704888,716870,138180,660850,405741,716860,660870,138121,716810,138122,645250,660860,403131,403132,704846,704844,611843,429718,716830,660890,429732,138151,660880,716820,790800,635810,635820,635830,702250,405723,702261,702262,405712,660810,635860,660813,660809,635870,540920,576910,540910,576920,682100,790810,143920,143921,515910,790840,704924,429420,790850,527910,429453,429452,429451,429455,429454,790880,131884,143869,143876,660755,660754,320050,611737,790900,704960,131874,621180,576930,576940,576960,576950,576970,539830,540820,515860,527850,501220,540810,539840,515850,540817,527860,540800,539810,515880,527830,539820,515870,682060,682061,527840,540860,527890,515890,539850,540840,527870,540830,527880,790930,143801,515820,527810,515810,527820,515840,515830,608024,608025,608026,608021,608023,131796,143776,645011,645010,576860,608093,608094,576870,608091,608092,576880,540870,608071,608072,576890,576820,608041,576830,608042,608043,608044,576850,576840,540743,540749,456890,501140,540723,501160,456870,501152,456880,501151,456850,405244,405243,405246,405245,405242,405241,456860,405233,405232,405234,442220,405231,456830,405222,405221,405224,405223,456840,420846,456810,503724,503726,407828,407825,407821,407819,501170,442191,442192,200070,200093,200092,456920,456930,456910,550090,501082,501080,501081,200163,200162,200161,501091,501092,712060,200180,631830,745850,770800,769820,151921,757840,745860,631840,769810,757810,745830,757820,745840,138912,138913,667830,138918,745810,138917,745800,667820,209810,745820,138928,667810,667850,138932,138933,138931,210800,667840,209830,210810,770890,209840,210820,770870,769890,210830,757890,210840,769880,770860,210850,769870,757870,769860,210860,770840,769850,770830,631818,757850,745870,769840,770820,757860,631820,769830,770810,138909,606762,769940,606764,770910,769930,769920,138868,138869,769910,631750,138870,757910,560872,757920,100271,210910,745900,210936,535870,330725,210945,305774,305775,305776,305777,210940,535880,330712,330713,305780,210951,330705,330708,535850,616130,305762,616121,616123,616122,769980,138881,305736,616112,138886,305737,616111,138887,616113,769970,138893,138890,535890,305701,616101,616100,616103,616102,769950,606775,606774,690012,616091,616093,616092,535930,604081,604084,604082,604083,535920,535940,604071,604072,641041,415904,415902,570123,415912,415911,415927,415929,570100,604051,604052,604041,604042,604030,604031,604032,476890,462242,604022,604021,476870,476880,462240,462241,464860,464870,476840,476860,464880,476850,464840,476820,464850,476830,464829,535830,440850,220041,220040,220042,535840,464830,476810,535800,535820,535810,415870,415880,427817,415850,100452,100453,100454,100455,100456,570022,210752,220122,220121,476920,476910,631470,415933,631480,320880,704063,704061,356830,368810,320870,356840,356850,356860,320850,356870,403710,356878,356880,320830,356890,320840,320810,631423,320820,437081,437082,437050,450010,437040,425020,425022,437010,425030,401043,401041,413011,413012,401073,401072,401071,401076,401074,670920,704120,706785,704132,704131,670910,706724,706734,356810,356820,356980,780764,780768,704142,704141,320950,305333,403812,704160,320930,631310,320940,462170,320920,462151,462152,320900,462121,462122,462123,462130,780705,450152,425141,670880,425143,425142,670890,670860,476701,670870,415786,415790,621890,621880,425132,425131,790140,415743,755820,670810,755810,403729,670840,718830,670850,790190,718823,368900,718820,403770,670820,718850,415721,403769,670830,718840,780850,755890,767880,780860,100110,138729,767870,780870,755870,767860,138741,780880,755880,767850,755850,780890,767840,755860,767830,755830,138705,138706,138703,755840,138700,767810,621870,136143,136142,136141,100193,151774,618200,537900,621840,537920,200810,780800,200820,136102,136101,621820,136104,136103,200830,136111,136112,621810,780830,200840,151742,780840,200850,767890,138794,138792,138790,706921,200860,718910,200880,706951,718920,621791,136061,136062,706901,706902,330071,330072,682772,704342,704341,767900,704360,704373,704372,704371,645758,706970,706972,704320,704330,537880,790340,790350,513840,537810,680042,525830,621745,537820,513830,200910,780900,525840,513860,200920,780910,525810,621720,513850,780920,680041,525820,513880,537850,525870,621709,537860,513870,525880,537830,200964,525850,537840,513890,525860,606083,606082,606081,200993,606072,606071,631050,704401,606064,606052,606032,606031,680012,680011,680014,680013,680015,513900,330160,330100,157223,121260,121252,121251,157250,613131,613132,613120,519920,157221,157222,157203,157201,157202,519910,613101,613102,613103,613104,556897,627704,530361,530362,520930,520940,520910,520920,135801,121240,135803,121232,121231,121220,410381,410380,135828,556902,121200,601061,601064,601065,133160,601051,601054,650020,650010,613010,613012,601031,601032,601035,601034,133110,135778,133111,133112,650030,133121,133123,601011,601013,601012,601016,135797,336040,300092,300091,711795,711796,336012,336011,556850,314760,556840,519890,568850,300131,300132,302758,556830,520880,556820,300100,530210,520890,556810,556895,314716,302716,568810,568820,568830,519820,520810,302701,519810,302707,520820,519840,519830,520850,519860,121110,520860,519850,121100,520870,520830,519880,520840,519870,711830,448835,448838,711860,711850,711810,711820,760840,760830,760820,760810,760800,400832,711880,711890,556704,556703,483130,556702,556701,760890,760870,760860,760850,461733,461714,461705,461701,410352,410351,410362,410361,410314,760940,760930,760920,760910,135966,135970,135976,135986,422233,422241,666940,678920,390759,666930,678930,666920,678940,666960,666950,678910,363171,363172,302182,302181,678970,233900,666970,245900,302161,678950,302162,233912,302172,302171,678960,245934,245942,302150,245910,302121,302123,302122,314110,245920,666910,678890,664230,678870,448548,678880,390870,666810,678810,390880,678820,390850,666830,390860,666820,137942,617851,412706,678850,150922,678860,302282,302281,678830,302283,678840,302242,302240,400715,302220,302223,400718,595910,302200,483032,630850,642830,471040,471033,471031,471032,471022,471021,365810,365820,422041,365830,365840,150908,150907,150905,150904,150902,365850,664160,390830,365860,390840,390810,390820,121040,706011,706012,706013,706014,595890,133040,157016,157014,157015,157018,157019,706020,706021,706022,121020,706023,706031,706033,706034,157012,157013,133060,157011,595850,630791,642780,642781,595840,617716,642779,595870,595880,595860,133022,595810,706091,706092,546880,595830,546870,595820,546860,706041,706042,706040,133072,133080,706050,157031,157032,245711,706060,546920,245781,546910,546900,780090,487930,487920,487910,463933,463947,780010,780030,534900,745706,706100,706101,706102,245810,233820,245820,233810,233840,233837,233830,233870,233860,233850,245830,245840,233878,534810,780180,534830,534820,269860,269840,534860,546850,534870,546840,534840,546830,534850,546810,546820,135510,135511,442060,430013,430012,430014,430017,430016,430019,430018,430011,430042,430041,430043,430031,430032,660331,660332,660322,660321,373810,361824,373830,373820,637940,336890,650920,336880,336870,336860,361791,336850,312890,336840,336820,336830,336819,336818,336817,336816,336815,336810,336808,312830,312850,312840,637910,312820,637920,637930,660280,442151,442152,456725,420779,420778,361910,456718,660200,361950,373850,157919,157917,637820,407707,373840,637830,373870,637840,157923,373860,157920,157921,361890,121922,601842,650830,373880,601801,133924,407715,336920,336910,157950,312930,143301,442070,312940,312910,312920,637810,517920,517910,503302,503301,529900,503312,503311,131702,153032,153033,153034,153035,153031,566910,153011,153012,153013,566920,517820,517810,660052,660051,611089,611088,611086,611085,611084,611083,611082,611081,517840,530812,529830,611074,530819,611073,611072,611071,530816,530813,530814,517830,530821,529840,517860,529810,517850,361706,361704,361703,361701,336782,566860,566870,566880,566890,566810,542840,517880,530851,530852,530850,529870,566820,542830,517870,503235,503234,529880,566830,300735,542820,529850,566840,542810,517890,529860,566850,530847,300721,300725,312702,542870,542850,542860,530708,446862,446861,446856,446854,409850,750800,409830,409890,409880,409870,701863,750880,540150,363920,750890,540140,363930,750850,750870,750860,361302,361301,540190,363961,750830,750840,750810,750820,530736,483778,471752,471738,701904,701912,701911,446977,407300,503012,503011,503010,503062,503061,503052,503051,420012,420011,420023,420022,420013,420033,420032,420031,420024,407063,407061,407062,407052,407051,407054,407041,407042,664910,676910,300180,664930,664920,664927,121919,121918,664950,664940,314880,133823,314890,627910,133841,157813,157814,314860,157819,363708,302886,314870,133857,133858,133859,314840,300200,314850,121863,121864,302873,302833,121852,314810,302848,314830,314820,302851,302850,157873,157878,143222,143223,143221,143224,363764,302826,157869,530500,157870,363776,363788,363793,363794,363795,363796,363797,131204,157832,131202,131201,131207,131205,157820,157824,157821,157822,157828,157826,131221,157854,143201,530510,143202,131233,131231,143192,143193,143191,676870,676880,676850,676860,157797,143150,446711,420111,420102,420101,676890,143180,420112,627860,627870,422719,664810,422720,627880,676820,676830,664820,676840,676810,363808,530460,363804,363805,363806,363807,530470,363822,627810,627830,530480,627840,530490,627850,131122,131121,133789,133784,121792,131132,131131,314920,131141,131142,143130,157762,361272,133750,235290,235280,681260,681262,681261,681270,681250,791706,717820,717810,717840,730800,717830,681210,380062,681220,681222,681221,331171,331172,730870,766830,742860,730860,766810,742870,766820,742830,742840,742850,742810,717860,730820,742820,717850,683801,730850,730840,742800,717870,730836,730830,791860,345810,791870,766880,369830,370820,766870,369820,369840,370810,766860,369850,370840,766850,742880,369860,370830,766840,742890,369870,370860,426070,463021,463022,370850,463023,609864,370880,683772,370870,526910,791820,426040,370890,791830,426060,402025,402023,402022,402021,402014,402012,402011,683700,402062,139209,402061,139207,139208,139205,142853,139210,656132,607121,656131,683763,607123,140201,683764,607122,140202,139223,139224,139221,402041,130890,402042,607110,609775,607112,607111,139232,683739,139231,142880,607102,607101,607100,142889,139241,139242,573352,573351,742980,345890,573353,345880,742960,345870,742970,345860,331210,742930,345850,742940,742950,345840,742910,345830,742920,345820,526880,526890,526870,480946,502816,526810,791910,502853,791920,526840,480919,791940,526850,502864,526820,502884,502885,526830,607050,467900,656040,561201,607062,607061,607060,607063,500132,500131,502798,500173,500172,500171,355012,355011,500112,500111,500103,500102,500101,331092,331093,331091,225820,225810,225850,225830,225840,250810,561180,561181,561182,225870,561191,561192,225860,250840,306060,306061,306062,225880,250850,250820,306050,250830,250880,250890,235270,250860,250870,323910,480770,500020,500043,500042,500041,500040,480737,480738,480726,480725,500060,431789,683430,480718,431791,431790,431775,467744,480707,443791,431795,441113,441112,441111,431740,431730,431732,431734,431753,431705,406736,406731,406730,701015,701012,701011,701014,701013,443700,443704,701021,701023,701024,683400,406762,406754,609401,609402,609403,750011,701032,701031,323940,323960,701040,323950,701050,323920,323930,750052,750051,750053,750022,750021,480851,467880,750030,467890,467860,467870,467830,467840,404253,404254,404251,404252,467850,480809,467810,431853,467820,609350,701110,636970,701120,431816,609340,636980,406842,406839,431832,740704,609322,609323,609324,609320,609321,609312,404231,404232,404233,404221,404222,404223,636910,636920,609391,609392,609393,636930,636940,636950,636960,235019,252840,703822,139204,139201,139202,764800,740830,140112,140114,142777,740840,152102,152101,740810,612856,740820,140150,703853,701210,701220,142765,740880,636810,764850,764830,636820,740890,764840,764820,740850,612898,636830,740860,764810,740870,636840,516940,565900,565910,465032,465031,465011,465013,130729,360830,360840,516910,360850,360860,516930,360870,516920,130702,740950,740960,740930,740940,612732,740910,590960,590950,612707,740920,600712,323890,590970,590920,323870,140080,152055,152054,152053,323880,152070,590910,323850,152082,590940,152081,323840,590930,323860,152093,152092,152091,139052,139053,140031,140032,139051,323820,612796,323830,152052,152051,323810,380940,630511,630512,402802,630522,630521,331932,343910,343900,461181,461180,461182,461192,461191,135081,135082,461194,461193,461162,461161,461160,135011,448171,448172,448131,448132,463782,448161,448162,463753,463754,463768,426790,463735,463732,534733,463711,451762,402770,355910,355920,630492,630491,451720,451722,451721,402752,451719,367910,367920,380920,402791,380910,705036,705035,705034,705033,705032,705031,705030,705039,705041,705040,730012,730011,705023,705022,705021,730072,730071,730032,730031,487890,730042,730041,487880,487870,487850,487860,487840,463889,487830,463886,463887,463888,487820,463851,412271,451860,487810,451850,451880,451870,463813,451820,451810,451840,451830,451800,412210,412222,412221,412223,150838,343753,355757,355756,150846,150847,150844,150845,150843,331756,135231,135232,135239,331740,135241,135242,135244,619910,331728,150808,331707,150821,150876,150880,150899,150898,150896,135271,135272,135281,135282,135284,668840,656860,719830,656850,668860,656880,719860,668850,719850,668880,668870,656890,331797,719820,668890,719810,137746,343880,355870,367840,380820,343870,367860,150722,355880,343860,607845,367870,355890,135110,137774,343850,380840,367880,331865,150741,380830,343840,367890,656810,573940,380860,656820,719880,402733,343830,585920,573950,719870,402721,380850,343820,668820,331830,402716,656840,380880,585940,343810,668810,331820,380870,719890,137741,573900,331810,548950,573910,331800,380890,548940,536940,573920,548930,573930,585910,548920,619870,137786,548990,150783,642170,135091,135092,656731,642111,355810,412022,412021,355820,355830,355840,367820,681716,343890,355850,656794,355860,367830,597830,585840,140808,597820,585850,585870,597850,548890,597860,585860,585880,597840,548880,573820,561857,573830,585810,597810,573840,585820,573850,585830,548830,536850,548820,536820,152874,548810,536830,548870,536890,139864,548860,536860,139866,548850,536870,619724,548840,235722,235721,235723,617081,617083,548900,536920,642091,548910,536910,140799,617041,617042,536930,630012,630011,585890,630041,630042,139705,140706,140707,573700,617010,617012,617011,617013,152735,152732,561705,500796,137130,137131,150104,150101,137071,137073,137072,137074,150046,150057,150055,150056,150053,150054,150051,150071,150072,536810,137042,137041,137044,137049,137062,137061,137069,137064,137063,150073,357920,369900,357930,357940,357950,370910,357960,357970,321920,321930,321910,426160,426173,426172,426171,426183,426182,426181,477707,404786,441769,441767,441770,404778,404772,404773,404774,404776,404777,703011,703012,404722,703015,703016,703013,703044,703045,703042,703040,703041,703046,703047,404760,404756,404757,404732,357910,404725,140915,140919,703064,703062,703061,140908,477850,150300,477840,695940,441866,441861,477810,441859,705717,477820,695920,441829,441828,441827,441825,441823,152898,695970,441810,695960,695950,681320,730731,441808,404804,730702,742709,742701,402208,402207,402206,402205,402204,402203,402202,402201,245050,362280,459722,435739,447715,447716,411793,411792,411795,411794,411796,435764,423714,423711,712900,435731,411702,340860,339870,340850,339860,340840,339850,340830,339840,340820,339830,340810,339940,340920,340910,340900,339910,376820,376810,110543,110541,110542,376840,376830,362201,376860,376870,376850,376890,376880,110552,110551,435856,435855,435859,435857,472810,472814,435863,435861,435860,110490,435877,689930,435884,435883,435882,411858,411861,435812,435811,435810,411868,435816,411862,435815,435814,435813,435818,435817,411872,435843,435834,421202,421201,641920,435809,435808,435807,411845,411844,411846,689900,340940,340930,472780,472793,472794,472792,472795,421192,421191,689880,447775,447773,435778,435777,421150,110440,472713,447777,472715,459751,689810,689830,220810,220800,219830,689800,220808,220830,232810,220820,689870,689840,220850,616850,689850,220840,301080,232820,570994,570995,220860,301060,220885,570950,301010,301020,641860,641870,122715,122700,134757,134751,120102,616838,120101,689797,690773,690771,134772,690747,122747,689771,689769,689768,362003,120131,120132,219900,120121,120122,690799,220910,220914,156032,156034,156033,689710,689700,689709,689708,616781,156050,641773,156052,156051,614111,614112,614113,220920,132012,132011,614101,614102,614104,604785,604786,604784,132021,232930,132023,132022,132032,132031,232920,132034,132033,120091,120092,120093,616738,132043,132042,132041,156011,132045,132044,570870,220982,570880,570890,301152,301150,301151,570830,339736,301132,570840,339732,339733,339724,339725,339726,339727,301141,301142,301140,570850,339721,339722,339723,156092,156091,156094,156093,156095,570860,301120,570910,339820,570920,339810,570930,570940,604746,362102,362101,362152,362151,614021,614022,614024,614011,614012,411311,136790,110125,411313,411312,110124,122100,602021,413983,602022,136735,136736,413910,136730,136751,570757,614093,614091,413900,570783,614060,570728,614050,614051,614052,614041,570734,614042,217040,614030,614031,614032,602051,545840,545820,545830,545810,570810,486880,570820,486860,486850,158093,158094,158091,158092,158097,158095,158096,545860,486820,545850,449870,136704,136703,449860,136713,449880,449830,100779,413880,450807,449850,122011,122010,411430,134021,134022,134023,134031,134032,134033,580063,219705,122052,122051,220704,122042,122041,220700,122030,122020,122013,122012,110042,122090,134080,134081,158053,158054,158051,158052,134082,122082,122081,158071,158072,158076,158073,158074,158077,122060,134053,134051,134052,555020,134061,134062,134071,134072,545729,545730,486905,486900,411371,411372,413726,437708,330880,330890,330870,330860,330850,330840,435090,506012,506010,506011,423051,423052,423061,423063,423064,506056,506055,435058,435041,435045,435044,435042,435047,423012,423013,423014,423015,423011,423016,423017,435012,435011,423034,423031,423032,423033,110330,413836,413840,110270,413850,667930,449810,667920,413860,667910,413870,401816,413816,413810,413820,330920,401808,330910,100815,100816,100817,462774,100824,100825,100826,100827,100828,100829,486705,667870,136810,667860,667890,100834,100835,100838,450752,450751,100830,450750,100833,462717,641270,667880,462718,450748,450740,100840,100841,100893,100894,100895,100896,100897,450719,450718,100872,136803,136805,136804,449720,413797,100882,100884,516830,443371,443372,443373,443374,516820,516850,502210,516840,502201,502202,516860,445981,502223,502250,502241,502242,502243,702722,445950,445940,445930,445960,516810,445920,445910,590880,590870,132757,120725,130101,130102,590890,120714,590840,565890,590830,132719,590860,590850,156784,565840,142140,502270,565850,156793,142150,502261,502262,565860,590820,565870,156794,590810,565880,502280,565820,482870,240701,142110,156771,156752,565830,240717,240716,482860,142120,142062,142061,142063,130081,130082,142071,142073,142072,130091,130092,443471,443472,142077,714830,714850,702871,714840,763830,763820,763810,799820,799810,714870,714860,215810,215830,714880,215820,130031,130032,215850,130050,252820,763870,763860,130022,130021,763840,763850,482732,445783,469716,445765,502010,445754,445753,350900,700310,421742,445728,406140,406131,406132,714900,406112,406111,350850,362838,362837,362836,362835,362834,350860,362845,350870,350880,350890,700351,480071,132955,700370,325920,480022,480021,480013,480012,325910,480011,431076,431075,431061,431062,431065,431081,431083,431082,431085,431086,431088,469880,482840,469890,482830,469860,469870,482810,445870,469840,445860,469850,445890,469810,469820,445880,469830,445877,699900,700422,700424,700423,638990,700432,132900,700431,445810,700444,700443,700442,445850,700441,445849,445840,445830,699930,699940,700400,445805,638910,132860,638920,638930,638940,132818,638950,638960,638970,638980,482780,480102,480101,480103,230830,230820,230850,230840,230870,230860,350710,362706,362701,122926,122925,301787,110920,301785,602818,638810,638830,638840,301750,301758,122934,626860,230900,626810,406052,406051,431052,431051,431054,431053,158886,626799,697120,158880,158881,406083,626781,406082,406081,699701,350810,579890,580870,350820,580880,350830,580890,362810,362829,350840,362820,362828,362827,362826,362718,362717,362716,580950,362713,602704,110815,325890,325880,362742,362749,325870,362746,579930,579920,362752,362750,580910,325860,360102,362764,360101,362761,580920,325850,362766,362772,580930,325840,325820,362790,362786,580940,362789,325830,325810,626766,134886,567910,134897,158854,580900,579910,600111,600112,697090,697080,614714,122893,697060,612083,612082,612081,712702,472900,600081,472903,612064,612063,612062,612061,600071,600072,600073,612052,612051,697013,697014,697011,697012,612034,612033,600052,612032,612022,612021,612012,612011,240043,700760,579850,580830,567870,579860,567880,580840,579870,580850,567890,579880,580860,567820,567830,579820,580808,579810,567840,579830,580810,567850,579840,580820,567860,506877,506874,506875,506873,472882,472880,472884,600014,472867,472860,567810,472870,472840,472850,472820,472830,700829,712820,506713,590060,712880,712850,712838,712836,712840,712870,712860,506771,506765,506761,555713,230810,472955,217756,220714,220915,220880,477709,477704,477830,412766,412705,410718,410730,410778,410902,411758,411797,427724,427720,423820,423729,423857,464810,464795,471704,471732,435820,435889,435823,435746,415901,415931,415930,415928,415921,415799,415789,415797,472970,483722,420744,420842,463908,463762,463788,463955,463792,463744,463745,461710,461310,462708,462741,441738,441713,443739,443721,443759,443724,442779,442766,442776,429932,429933,429934,429935,429936,429942,429913,425712,456781,431906,430709,430754,482750,446811,446799,446739,446803,448749,448926,448766,448760,437704,480700,480701,467701,467715,413915,413756,413796,413950,459721,450704,445700,445701,445980,445907,656876,664703,626740,626787,626742,626789,660710,660704,660753,660752,631718,631717,630703,630705,642937,642716,642717,642380,641741,641280,645014,645031,650825,650941,637704,780715,780763,730725,730732,740703,742705,760709,760707,763710,790703,790785,790230,506876,506756,506729,506730,506778,503729,501711,501701,501703,500704,500709,500724,502887,705776,705777,705778,705779,705710,705719,711793,711794,701778,701909,701908,701910,701903,706965,706732,306240,306250,300450,302718,302832,302710,302709,302712,305778,305789,301789,618703,618702,618709,618715,618710,609702,609732,609723,609719,609724,609737,619711,619960,619753,619747,608745,608782,608890,608785,608747,608733,607797,607796,607765,607773,614887,614890,614704,614728,614782,614783,614708,614709,614785,614707,614894,614737,614738,614727,614732,614786,614710,614740,616719,616714,616843,616778,616779,616780,617737,604752,602703,611742,611744,611745,611777,606760,606773,600756,600700,612797,612912,135749,135853,135774,135535,135533,135532,135542,134816,134831,134745,142715,151919,151745,151746,151747,151748,151743,151744,151749,151908,151916,151720,151722,151724,151917,143708,143004,143913,153720,153721,153718,153795,139713,130742,130739,156705,156828,156864,121920,137966,137710,137708,137732,137736,137737,137738,137744,137734,133860,133707,133792,136872,136873,136874,136871,136867,136868,136869,136132,136866,136865,138709,138768,138767,138929,138786,138787,138882,158714,158766,158709,158786,158787,150956,150773,150769,150711,150702,150756,150703,150948,150994,140701,140766,140722,140777,140736,140716,122752,110788,110749,110770,110769,110768,110764,110785,100790,100735,100750,100955,131203,131840,131704,339735,339715,339714,339731,339706,339700,680732,680748,682770,682773,683753,683712,683792,689707,689760,689783,689781,689780,681707,681764,417710,407370,407811,407712,402710,402750,402713,402724,402861,402869,402704,405730,401722,401705,403790,403743,403718,403852,404721,404708,404718,404770,404716,404742,404724,406748,406746,406785,406700,406732,406773,406763,406747,409841,409842,400702,530784,530712,534735,534734,534732,534731,534702,540858,535863,535919,535918,550755,550705,513700,537832,537802,537804,537803,537808,539813,539913,539805,536808,573891,573708,590703,565909,565810,560717,560010,697823,690847,690790,695793,695919,695983,695981,695945,321925,314715,312700,343712,343711,355741,355762,355761,356762,356715,356712,356714,356713,356711,336789,331735,331706,331710,331758,331767,350700,369711,362754,362765,362767,362724,362708,362875,362788,362722,362791,362792,362793,362794,362787,362850,362851,363767,363786,361705,361709,361728,old_va".split(",");
		RestTemplate restTemplate = new RestTemplate();
		Map<String, String> zipcodeAddressMap = Maps.newHashMap();
		Map<String, String> jibunAddressMap = Maps.newHashMap();
		Map<String, String> inputJibunAddressMap = Maps.newHashMap();

		Arrays.stream(oldZipCodeArray).forEach(oldZipCode -> {
			String url = "http://chemionshop.com/exec/common/zipcoden/find";
			String keyword = oldZipCode;
			String keywordType = "null";
			String selectPost = "6";

			MultiValueMap<String, String> parameters = new LinkedMultiValueMap<>();
			parameters.add("keyword", keyword);
			parameters.add("keyword_type", keywordType);
			parameters.add("selectpost", selectPost);

			HttpHeaders headers = new HttpHeaders();
			HttpEntity<MultiValueMap<String, String>> request = new HttpEntity<>(parameters, headers);

			String response = restTemplate.postForObject(url, request, String.class);
			log.debug("result : {}", response);

			response = response.replace("\\r\\n", "");

			Map<Object,Object> map = new HashMap();
			ObjectMapper mapper = new ObjectMapper();

			try {
				//convert JSON string to Map
				map = mapper.readValue(response, new TypeReference<HashMap<Object,Object>>(){});
			} catch (Exception e) {
				log.info("Exception converting {} to map", response, e);
			}

			LinkedHashMap resultData = (LinkedHashMap)map.get("resultData");
			ArrayList listData = (ArrayList) resultData.get("listData");
			LinkedHashMap listDataGet0 = (LinkedHashMap) listData.get(0);

			String zipcodeAddress = (String) listDataGet0.get("zipcode_address");
			String jibunAddress = (String) listDataGet0.get("jibunAddress");
			String inputJibunAddress = (String) listDataGet0.get("inputJibunAddress");

			zipcodeAddressMap.put(oldZipCode, zipcodeAddress);
			jibunAddressMap.put(oldZipCode, jibunAddress);
			inputJibunAddressMap.put(oldZipCode, inputJibunAddress);

			log.info("test");
		});

		log.info("result : {}, {}, {} ", zipcodeAddressMap,jibunAddressMap,inputJibunAddressMap);

	}


}
